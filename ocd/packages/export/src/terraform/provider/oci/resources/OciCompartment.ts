/*
** Copyright (c) 2020, 2024, Oracle and/or its affiliates.
** Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.
*/

import * as AutoGenerated from "./generated/OciCompartment.js"
import { OciModelResources as Model } from '@ocd/model'

export class OciCompartment extends AutoGenerated.OciCompartment {
    constructor(resource: Model.OciCompartment, idTFResourceMap: Record<string, string> = {}, isHomeRegion: boolean = true) {
        super(resource, idTFResourceMap, isHomeRegion)
    }
    // Override
    generateData(resource: Model.OciCompartment) {
        const content = `
# ------ Read Compartment
data "oci_identity_compartments" "${resource.terraformResourceName}" {
    # Required
    compartment_id = var.tenancy_ocid
    compartment_id_in_subtree = true
    filter {
        name = "name"
        values = ["${resource.displayName}"]
    }
}

locals {
    ${resource.terraformResourceName}_id   = data.oci_identity_compartments.${resource.terraformResourceName}.compartments[0].id
    ${resource.terraformResourceName}_ocid = data.oci_identity_compartments.${resource.terraformResourceName}.compartments[0].id
}
`
    return content
    }
}

export default OciCompartment
